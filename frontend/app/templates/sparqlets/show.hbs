<h1>{{if model.title model.title model.id}}</h1>
<p>
  <a href={{model.apiPath}}>{{path-to-url model.apiPath}}</a>
</p>

{{#each this.error.errors as |error|}}
  <div class="alert alert-danger">
    <strong>Error</strong> {{error.detail}}
  </div>
{{/each}}

<SparqletRunner @apiPath={{model.apiPath}} @traceModeApiPath={{model.traceModeApiPath}} @params={{model.params}} />

<div class="card my-3">
  <div class="card-header">
    <div class="d-flex align-items-center">
      <div class="mr-auto">
        <strong>API code document</strong>
        <div>{{model.mdPath}} <span class="text-muted">(version: {{model.mtime}})</span></div>
      </div>

      {{#if this.session.isAuthenticated}}
        <div>
          <LinkTo @route="sparqlets.new" @query={{hash forkFrom=model.id}} class="btn btn-outline-primary" @role="button">
            <FaIcon @icon="code-branch" /> Fork
          </LinkTo>

          <LinkTo @route="sparqlets.edit" @model={{model}} class="btn btn-outline-primary" @role="button">
            <FaIcon @icon="edit" /> Edit
          </LinkTo>

          <button {{on "click" (fn this.delete model)}} class="btn btn-outline-danger">
            <FaIcon @icon="trash" /> Delete
          </button>
        </div>
      {{/if}}
    </div>

    <ul class="nav nav-tabs card-header-tabs mt-2">
      <li class="nav-item">
        <a class="nav-link active" data-toggle="tab" href="#html">HTML</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#markdown">Markdown</a>
      </li>
    </ul>
  </div>

  <div class="card-body tab-content">
    <div {{evaluate-scripts}} id="html" class="tab-pane active">
      {{! template-lint-disable no-triple-curlies }}
      {{{model.html}}}
    </div>

    <div class="tab-pane" id="markdown">
      <pre><code>{{model.src}}</code></pre>
    </div>
  </div>
</div>